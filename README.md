# 스네이크 게임 (3인 프로젝트)
-----------------------------
## 게임 구성

1. Map
+ 사용자의 터미널에 2차원 배열의 Snake Map을 표시한다. 
+ Map에는 wall과 immune wall(게이트가 나타날 수 없음)을 구분해서 넣는다.
+ 미션을 클리어할 수록 난이도 상향을 위해 snake를 가로막는 벽의 길이와 개수가 더 많아진다.
+ 사용자가 맵 크기에 맞출 필요가 없도록 고정된 크기가 아닌 사용자의 터미널 크기에 따라 map의 크기도 함께 변동된다.
#### 터미널의 화면을 게임윈도우, 미션윈도우, 점수윈도우로 분할한다. 이때, 터미널의 크기에 맞게 각 윈도우를 조정하고 조정된 게임 윈도우의 크기를 인자로 받아와 map 배열의 크기로 만든다.
map에서 기본이 되는 wall(map에 1로 표시)은 게임이 시작하자마자 형성된다. 이때 벽의 각 꼭짓점는 immune wall (map에 2로 표시)의 상태로 변경시킨다. 게임 창의 테두리 뿐만이 아니라 snake가 존재하지 않는 임의의 공간에 각 스테이지 레벨에 알맞은 길이와 개수의 벽을 지정한다. 벽을 생성할때 테두리 벽에 닿는 형태로 벽이 생성되지않도록 범위를 정해서 생성한다. 모든 벽이 생성된 후에 map배열을 반복문으로 돌면서 상태가 1인 벽들을 검사하여 상하좌우에 벽이 있는 곳(gate가 생성될 수 없는 상태)을 찾아 immune wall(2)로 상태를 변경해준다.

2. Snake
+ Map 위에 Snake를 표시하고 사용자로부터 방향키 입력을 받아들여 움직이도록 한다.
+ snake는 일정 시간(틱)에 의해 이동하며 Map에 포함된 wall, item, gate 등의 요소와 상호작용한다.
+ 미션을 클리어할 수록 snake가 빠르게 움직이도록 한다.
+ snake는 map의 배열 안에는 포함되지 않는 별개의 vector로 움직임을 정의한다.
+ dash_move()로 한 번에 더 많은 이동을 할 수 있다.
#### snake는 Point 타입의 vector를 사용해 만들어진다. 게임이 시작하면, snake는 게임 윈도우의 가운데에 위치해 기본 길이인 4의 길이를 가지고 생성된다. 방향키 입력을 받을 때 snake[0]의 row와 col 값에 해당하는 map 배열의 값이 어떤지에 따라 meet_gate()와 meet_item() 이벤트를 호출하고 아무 이벤트도 호출되지 않은 경우엔 알맞은 위치로 머리를 이동시킨다. 꼬리를 제외한 몸통은 tmp라는 배열에 일시적으로 저장된 후 다시 snake 배열에 tmp 배열을 할당하면서 함께 이동한다. 또한 스페이스 바 입력을 받으면 dash_move()를 호출하고 이 안에서 일정 조건 하에서  snake_move()를 여러번 호출해 한 번에 최대 5칸을 나아갈 수 있도록 한다. snake[0]이 벽이나 snake의 몸통에 닿게 되거나, snake의 vector 사이즈가 3보다 작아지거나, poison 아이템을 많이 먹어 poison mission이 충족되면 게임에 실패한 것이다. 게임 실패시 첫 스테이지부터 다시 시작하게 된다. 반대로 앞선 조건들에 해당하지 않고 poison 미션이 아닌 다른 미션들을 충족하면 다음 스테이지와 새로운 미션을 받게 된다.

3. Item
+ Map 위에 wall이 아닌 임의의 위치에 growth item과 poison item이 랜덤하게 동시에 3개 출현한다.
+ item은 map 배열에 5, 6 각각의 숫자로 표시되고 queue를 사용해 랜덤한 3개의 점을 저장하고 있다.
+ queue의 선입선출 특성을 이용해 시간에 따라 위치가 바뀐다.
+ growth item을 먹으면 snake가 길어지고 poison item을 먹으면 snake가 짧아진다.
#### item은 종류에 관계 없이 items라는 이름의 queue에 들어간다. items는 point 타입의 3개 객체를 가지며 point들의 row, col 위치는 snake와 wall이 위치하지 않은 임의의 위치에 겹치지 않도록 지정된다. 처음에는 3개의 아이템이 동시에 형성되지만 5초의 시간이 지날수록 items의 제일 앞에 있는 객체를 제거한 후 화면에서의 표시를 지우고 새로운 아이템을 뒤에 추가해주고 화면에 표시해준다. item은 snake와의 상호작용을 위해 map 배열에도 표시해준다. 이 때 growth item은 5, poison item은 6으로 표시한다. snake가 아이템에 닿으면 snake의 길이를 1 감소하거나 증가시켜준 후 화면의 표시를 지우고 새로운 아이템을 다시 만들어 표시하도록 한다.

4. Gate
+ wall의 임의의 위치에 한 쌍의 gate가 출현한다.
+ Map에 wall과 immune wall, item들과는 다른 숫자(9)로 지정되어 구분된다.
+ 하나의 gate에 snake가 접근하면 나머지 gate로 통과한다.
+ gate를 지난 snake의 방향은 프로젝트의 게임 규칙을 따른다.
#### gate는 각 스테이지 마다 한 쌍씩만 생기는데, map의 wall(1) 중에 임의의 두 곳을 random으로 선택하여 gate의 위치를 선정한다. 
snake가 gate를 만났을 때의 움직임은 다음과 같다. current_head가 게이트에 닿았을때 게이트를 통과한 것으로 하며 다음 틱 때 다른 게이트 +1의 위치에 머리를 이동한다. 게이트에 머리가 닿았을 때 한번만 게이트 통과 함수(meet_gate())를 사용하고 그후로는 일반 snake_move() 함수를 이용하여 머리가 지나간 곳을 그대로 지나가게 한다. 머리가 게이트를 통과할 때, 원래 진행 방향대로 진출하거나 만약 그 방향이 막혀있을 시 시계방향, 반시계방향, 반대방향의 순서대로 진출할 수 있도록 한다. 게이트 진출 방향 탐색시 배열에 상하좌우가 없을 경우가 있으므로 그 경우에는 해당 방향을 검사하지 않도록 한다.

5. 점수
+ snake가 벽에 닿거나 길이가 조건 이하로 짧아지면 게임이 끝난다.
+ mission 창 위에 snake의 현재 길이와 게임 중 몸의 최대 길이, 획득한 growth item, poison item, gate의 사용횟수를 표시한다.
+ 스테이지 클리어 또는 게임 오버되었을때 해당 스테이지를 플레이한 타임이 뜬다.
#### Mission
각 스테이지 레벨에 맞는 mission을 정하여 둔다. clear mission들은 각 스테이지에서 정해준 개수대로 클리어 할때 스테이지 클리어가 되고, end mission은 조건을 완료하면 그대로 게임 오버가 된다. mission_show()에서는 현재 스테이지의 레벨, 현재 미션의 종류, 미션의 완료 여부등을 알려준다. 
score
score_show()에서는 미션을 클리어하는데 필요한 현재 상태들을 실시간으로 알려준다. 길이를 표시할때는 현재길이/ 최대 길이로 표시되는데 이때 현재길이는 말 그대로 snake의 길이를 의미하고, 최대길이는 해당 스테이지에서 snake가 가장 길었을때의 길이를 말한다. 또한 스테이지를 끝내고 다음 스테이지로 넘어갈때, 즉 started 의 상태가 false일때 해당 스테이지를 플레이한 타임을 보여준다. 

## 게임의 실패조건
1. 뱀의 몸 길이 3 미만
2. 뱀 자신의 몸에 닿을 때
3. 벽에 닿을 때
4. 포이즌 아이템을 특정 개수 이상으로 먹었을 때

## 사용 모듈
+ ncures.h
  + 텍스트 사용자 인터페이스(TUI) 응용프로그램 구성을 가능하게 함
+ locale.h
  + 한글 출력에 사용
+ locale.h
  + 터미널 사이즈 측정에 사용
+ stdio.h
  + C 언어의 표준라이브러리 함수의 매크로 정의, 상수, 여러 형의 입출력 함수가 포함된 헤더파일.
+ unistd.h
  + 표준 심볼 상수 및 자료형을 가진 헤더파일
+ ctime
  + 날짜와 시간 함수를 가진 라이브러리
+ cstdlib
  + 난수 생성을 위함
+ queue
  + item을 담기 위한 container제공.
+ vector
  + snake를 담기 위한 container 제공.
+ string
  + 문자열 함수들이 있는 라이브러리

## 파일 일람
